import{d as B,_ as D,r as h,o as u,c as v,b as y,e as m,s as g,t as N,j as b,w as r,F as w,q,a as k,v as z,k as A,A as F,f as U,p as E,i as L,B as O,x as $}from"./index.b9085ce3.js";const V=B({props:{title:{type:String,default:""},listCount:{type:Number,default:0},dataList:{type:Object,default:()=>{},require:!0},propList:{type:Array,default:[],require:!0},page:{type:Object,default:()=>({currentPage:0,currentSize:10})},childrenProps:{type:Object,default:()=>({})}},emits:["update:page"],setup(e,{emit:t}){return{handleSizeChange:o=>{t("update:page",{...e.page,pageSize:o})},handleCurrentChange:o=>{t("update:page",{...e.page,currentPage:o})}}}}),H={class:"header"},I={class:"title"},M={class:"footer"};function T(e,t,l,p,o,c){const d=h("el-table-column"),i=h("el-table"),a=h("el-pagination");return u(),v(w,null,[y("div",H,[m(e.$slots,"header",{},()=>[y("div",I,[g(N(e.title)+" ",1),m(e.$slots,"headerHandler",{},void 0,!0)])],!0)]),b(i,z({data:e.dataList,style:{width:"100%"},border:"","row-key":""},e.childrenProps),{default:r(()=>[(u(!0),v(w,null,q(e.propList,n=>(u(),k(d,z({key:n.prop},n,{align:"center","show-overflow-tooltip":""}),{default:r(C=>[m(e.$slots,n.slotname,{row:C.row},()=>[g(N(C.row[n.prop]),1)],!0)]),_:2},1040))),128))]),_:3},16,["data"]),y("div",M,[m(e.$slots,"footer",{},()=>[b(a,{currentPage:e.page.currentPage,"onUpdate:currentPage":t[0]||(t[0]=n=>e.page.currentPage=n),"page-size":e.page.pageSize,"onUpdate:page-size":t[1]||(t[1]=n=>e.page.pageSize=n),"page-sizes":[10,200,300,400],small:e.small,disabled:e.disabled,background:e.background,layout:"total, sizes, prev, pager, next, jumper",total:e.listCount,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","small","disabled","background","total","onSizeChange","onCurrentChange"])],!0)])],64)}var G=D(V,[["render",T],["__scopeId","data-v-a4883b22"]]);function f(e,t){const p=A().state.login.permissions,o=`system:${e}:${t}`;return!!p.find(c=>c==o)}const J=B({components:{Mytable:G},props:{pageName:{type:String,require:!0},propList:{type:Array,require:!0},title:{type:String,require:!0},childrenProps:{type:Object,default:()=>({})}},emits:["newBtnClick","editBtnClick"],setup(e,{emit:t}){var P;const l=F(),p=f(e.pageName,"create"),o=f(e.pageName,"update"),c=f(e.pageName,"delete"),d=f(e.pageName,"query"),i=U({currentPage:0,pageSize:10});E(i,()=>{a()});const a=(s={})=>{if(!d)return;const S={};for(const _ in s)s[_]!=""&&(S[_]=s[_]);l.dispatch("system/getPageListAction",{pageUrl:e.pageName,queryInfo:{offset:i.value.currentPage*i.value.pageSize,size:i.value.pageSize,...S}})};a();const n=L(()=>l.getters["system/pageListData"](e.pageName)),C=L(()=>l.getters["system/pageListCount"](e.pageName)),j=(P=e.propList)==null?void 0:P.filter(s=>!(s.slotName==="status"||s.slotName==="handle"));return{dataList:n,getpageData:a,dataCount:C,pageInfo:i,otherSlot:j,isCreate:p,isUpdate:o,isDelete:c,handleDeleteClick:s=>{l.dispatch("system/deletPageDataAtcion",{pageName:e.pageName,id:s.id})},handleNewClick:()=>{t("newBtnClick")},handleEditClick:s=>{t("editBtnClick",s)}}}}),K={class:"content"},Q=g("\u65B0\u5EFA\u7528\u6237"),R={class:"handle-btns"},W=g("\u7F16\u8F91"),X=g("\u5220\u9664");function Y(e,t,l,p,o,c){const d=h("el-button"),i=h("mytable");return u(),v("div",K,[b(i,{dataList:e.dataList,propList:e.propList,listCount:e.dataCount,title:e.title,page:e.pageInfo,"onUpdate:page":t[1]||(t[1]=a=>e.pageInfo=a),childrenProps:e.childrenProps},O({headerHandler:r(()=>[e.isCreate?(u(),k(d,{key:0,type:"primary",size:"mini",onClick:t[0]||(t[0]=a=>e.handleNewClick())},{default:r(()=>[Q]),_:1})):$("",!0)]),status:r(a=>[b(d,null,{default:r(()=>[g(N(a.row.enable?"\u542F\u7528":"\u7981\u7528"),1)]),_:2},1024)]),handle:r(a=>[y("div",R,[e.isUpdate?(u(),k(d,{key:0,size:"mini",type:"text",onClick:n=>e.handleEditClick(a.row)},{default:r(()=>[W]),_:2},1032,["onClick"])):$("",!0),e.isDelete?(u(),k(d,{key:1,size:"mini",type:"text",onClick:e.handleDeleteClick},{default:r(()=>[X]),_:1},8,["onClick"])):$("",!0)])]),_:2},[q(e.otherSlot,a=>({name:a.slotName,fn:r(n=>[m(e.$slots,a.slotName,{row:n.row})])}))]),1032,["dataList","propList","listCount","title","page","childrenProps"])])}var ae=D(J,[["render",Y]]);export{ae as P};
